<div class="container">
  <div class="title-header">
    <h1 class="is-size-1 has-text-centered">
      Pets Looking for Their Furr-ever Home!
    </h1>
  </div>
  <hr />
  <div class="columns is-justify-content-space-evenly">
    <div class="card is-one-third column" *ngFor="let pet of pets">
      <div class="card-image">
        <figure class="image is-4by3">
          <img src="{{ pet.imagePath }}" alt="Placeholder image" />
        </figure>
      </div>
      <div class="card-content">
        <div class="media">
          <div class="media-content">
            <p class="title is-size-1">{{ pet.petName }}</p>
            <p class="subtitle is-6">{{ pet.petBreed }}</p>
          </div>
        </div>

        <div class="content">{{ pet.message }}</div>
        <button
          class="button is-link pet-details-button"
          (click)="openPetDetails(pet)"

        >
          Details
        </button>
      </div>
    </div>
  </div>

  <!-- Adoption Form Modal -->

  <div class="modal" [ngClass]="isApplyClicked ? 'is-active' : ''">
    <!-- Modal for Adoption Request Form -->
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head has-background-info">
        <p
          class="modal-card-title has-text-weight-bold is-size-3 has-text-centered"
        >
          Adoption Request Form
        </p>
        <button
          class="delete"
          aria-label="close"
          (click)="onCancel()"
        ></button>
      </header>
      <section class="modal-card-body">
        <!-- Form start -->
        <form [formGroup]="adoptionRequestForm" (ngSubmit)="onSubmit()">
          <!-- Pet Name -->
          <div class="field">
            <label class="label">Pet Name:</label>
            <!-- auto populate from the pet card they click on -->
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="petName"
                placeholder="" readonly>
            </div>
          </div>

          <label
            class="label has-text-centered has-text-weight-bold is-size-4 has-text-info"
            style="margin: 50px"
            >Contact Information</label
          >
          <!-- Applicant Name -->
          <label class="label">Applicant Name:</label>
          <div class="field is-grouped">
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="firstName"
                placeholder="First Name"
              />
              <p
              class="help is-danger" *ngIf="!adoptionRequestForm.get('firstName').valid && onSubmitClicked">
              First name required.
              </p>
            </div>
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="lastName"
                placeholder="Last Name"
              />
              <p
              class="help is-danger" *ngIf="!adoptionRequestForm.get('lastName').valid && onSubmitClicked">
              Last name required.
              </p>
            </div>
          </div>

          <!-- Address -->
          <label class="label">Address:</label>
          <div class="field is-grouped is-grouped-multiline">
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="streetNumber"
                placeholder="Number"
              />
              <p
              class="help is-danger" *ngIf="!adoptionRequestForm.get('streetNumber').valid && onSubmitClicked">
              Street number required.
              </p>
            </div>

            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="streetName"
                placeholder="Street"
              />
              <p
              class="help is-danger" *ngIf="!adoptionRequestForm.get('streetName').valid && onSubmitClicked">
              Street name required.
              </p>
            </div>

            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="city"
                placeholder="City"
              />
              <p
              class="help is-danger" *ngIf="!adoptionRequestForm.get('city').valid && onSubmitClicked">
              City name required.
              </p>
            </div>

            <div class="control">
              <input
                class="input"
                style="width: 60px"
                formControlName="state"
                type="text"
                placeholder="State"
              />
              <p
              class="help is-danger" *ngIf="!adoptionRequestForm.get('state').valid && onSubmitClicked">
              State required.
              </p>
            </div>

            <div class="control">
              <input
                class="input"
                style="width: 133px"
                type="text"
                formControlName="zipCode"
                placeholder="Zip code"
              />
              <p
              class="help is-danger" *ngIf="!adoptionRequestForm.get('zipCode').valid && onSubmitClicked">
              Zipcode required.
              </p>
            </div>
          </div>

          <!-- Phone Number -->
          <div class="field">
            <label class="label">Phone Number:</label>
            <div class="control">
              <input
                class="input"
                type="tel"
                formControlName="phoneNumber"
                placeholder="555-555-5555"
              />
              <p
              class="help is-danger" *ngIf="!adoptionRequestForm.get('phoneNumber').valid && onSubmitClicked">
              Phone Number required.
              </p>
            </div>
          </div>

          <!-- Email -->
          <div class="field">
            <label class="label">Email</label>
            <div class="control">
              <input
                class="input"
                type="email"
                formControlName="email"
                placeholder="Email@email.com"
              />
              <p
              class="help is-danger" *ngIf="!adoptionRequestForm.get('email').valid && onSubmitClicked">
              Email required.
              </p>
            </div>
          </div>

          <label
            class="label has-text-centered has-text-weight-bold is-size-4 has-text-info"
            style="margin: 50px"
            >Household Information</label
          >

          <!-- Residence Radio Buttons -->
          <div style="margin-top: 30px">
            <label class="label">Type of Residence:</label>
            <div class="field is-grouped">
              <div class="control is-flex is-align-items-center">
                <label class="radio">
                  <input
                    type="radio"
                    formControlName="housingType"
                    value="House"
                  />
                  House
                </label>
                <label class="radio">
                  <input
                    type="radio"
                    formControlName="housingType"
                    value="Apartment"
                  />
                  Apartment
                </label>
                <label class="radio">
                  <input
                    type="radio"
                    formControlName="housingType"
                    value="Duplex"
                  />
                  Duplex
                </label>
                <label class="radio">
                  <input
                    type="radio"
                    formControlName="housingType"
                    value="Other"
                  />
                  Other
                </label>
                <input
                  class="input"
                  style="width: 265px; margin-left: 15px"
                  type="text"
                  formControlName="housingType"
                  placeholder=""
                />
              </div>
            </div>
            <p
            class="help is-danger" *ngIf="!adoptionRequestForm.get('housingType').valid && onSubmitClicked">
            Please select an option.
            </p>
          </div>

          <!-- Home Life Questions -->

          <!-- Household members -->
          <label class="label" style="margin-top: 25px"
            >Name and age of all household members:</label
          >

          <div class="field is-grouped">
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="hhName"
                placeholder="Name"
              />
            </div>
            <div class="control">
              <input
                style="width: 70px"
                class="input"
                type="text"
                formControlName="hhAge"
                placeholder="Age"
              />
            </div>
          </div>
          <div class="field is-grouped">
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="hhName"
                placeholder="Name"
              />
            </div>
            <div class="control">
              <input
                style="width: 70px"
                class="input"
                type="text"
                formControlName="hhAge"
                placeholder="Age"
              />
            </div>
          </div>
          <div class="field is-grouped">
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="hhName"
                placeholder="Name"
              />
            </div>
            <div class="control">
              <input
                style="width: 70px"
                class="input"
                type="text"
                formControlName="hhAge"
                placeholder="Age"
              />
            </div>
          </div>
          <div class="field is-grouped">
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="hhName"
                placeholder="Name"
              />
            </div>
            <div class="control">
              <input
                style="width: 70px"
                class="input"
                type="text"
                formControlName="hhAge"
                placeholder="Age"
              />
            </div>
          </div>
          <div class="field is-grouped">
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="hhName"
                placeholder="Name"
              />
            </div>
            <div class="control">
              <input
                style="width: 70px"
                class="input"
                type="text"
                formControlName="hhAge"
                placeholder="Age"
              />
            </div>
          </div>
          <div class="field is-grouped">
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="hhName"
                placeholder="Name"
              />
            </div>
            <div class="control">
              <input
                style="width: 70px"
                class="input"
                type="text"
                formControlName="hhAge"
                placeholder="Age"
              />
            </div>
          </div>

          <!-- Animals In Home -->
          <label class="label" style="margin-top: 25px"
            >Name, type, and age of all pets in the home:</label
          >

          <div class="field is-grouped">
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="hhPet"
                placeholder="Name"
              />
            </div>
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="petType"
                placeholder="Type"
              />
            </div>
            <div class="control">
              <input
                style="width: 70px"
                class="input"
                type="text"
                formControlName="petAge"
                placeholder="Age"
              />
            </div>
          </div>
          <div class="field is-grouped">
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="hhPet"
                placeholder="Name"
              />
            </div>
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="petType"
                placeholder="Type"
              />
            </div>
            <div class="control">
              <input
                style="width: 70px"
                class="input"
                type="text"
                formControlName="petAge"
                placeholder="Age"
              />
            </div>
          </div>
          <div class="field is-grouped">
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="hhPet"
                placeholder="Name"
              />
            </div>
            <div class="control">
              <input
                class="input"
                type="text"
                formControlName="petType"
                placeholder="Type"
              />
            </div>
            <div class="control">
              <input
                style="width: 70px"
                class="input"
                type="text"
                formControlName="petAge"
                placeholder="Age"
              />
            </div>
          </div>

          <!-- Care for pet questions -->
          <div class="field is-grouped" style="margin-top: 30px">
            <label class="label is-flex is-align-items-center"
              >Where will you keep this pet when you are home?</label
            >
            <div class="control">
              <div class="select" style="margin-left: 15px">
                <select style="width: 300px" formControlName="whenHome">
                  <option>Select</option>
                  <option>Inside residence only</option>
                  <option>Outside only</option>
                  <option>Inside and outside</option>
                </select>
                <p
                class="help is-danger" *ngIf="!adoptionRequestForm.get('whenHome').valid && onSubmitClicked">
                Please select an option.
                </p>

              </div>
            </div>
          </div>

          <div class="field is-grouped">
            <label class="label is-flex is-align-items-center"
              >Where will you keep this pet when you are not home?</label
            >
            <div class="control">
              <div class="select" style="margin-left: 15px">
                <select style="width: 300px" formControlName="whenNotHome">
                  <option>Select</option>
                  <option>Inside residence only</option>
                  <option>In fenced yard</option>
                  <option>Outside on chain/tether/lead</option>
                  <option>Boarded/Pet Daycare</option>
                  <option>Family/Friends</option>
                </select>
                <p
                class="help is-danger" *ngIf="!adoptionRequestForm.get('whenNotHome').valid && onSubmitClicked">
                Please select an option.
                </p>
              </div>
            </div>
          </div>

          <!-- Additional Questions -->

          <label
            class="label has-text-centered has-text-weight-bold is-size-4 has-text-info"
            style="margin: 50px"
            >Additional Information</label
          >
          <div>
            <label class="label">Are you employed?</label>
            <label class="radio">
              <input
                type="radio"
                formControlName="employment"
                value="Full-time"
              />
              Full-time
            </label>
            <label class="radio">
              <input
                type="radio"
                formControlName="employment"
                value="Part-time"
              />
              Part-time
            </label>
            <label class="radio">
              <input
                type="radio"
                formControlName="employment"
                value="Retired"
              />
              Retired
            </label>
            <label class="radio">
              <input type="radio" formControlName="employment" value="No" />
              No
            </label>
          </div>
          <p
          class="help is-danger" *ngIf="!adoptionRequestForm.get('employment').valid && onSubmitClicked">
          Please select an option.
          </p>

          <div>
            <label class="label" style="margin-top: 10px"
              >Can you commit to taking care of this pet for the entirety of its
              life span?</label
            >
            <label class="radio">
              <input type="radio" formControlName="commitment" value="Yes" />
              Yes
            </label>
            <label class="radio">
              <input type="radio" formControlName="commitment" value="No" />
              No
            </label>
          </div>

          <p
          class="help is-danger" *ngIf="!adoptionRequestForm.get('commitment').valid && onSubmitClicked">
          Please check yes or no.
          </p>

          <div>
            <label class="label" style="margin-top: 10px"
              >Have you ever surrendered a pet?</label
            >
            <label class="radio">
              <input type="radio" formControlName="surrender" value="Yes" />
              Yes
            </label>
            <label class="radio">
              <input type="radio" formControlName="surrender" value="No" />
              No
            </label>
          </div>

          <p
          class="help is-danger" *ngIf="!adoptionRequestForm.get('surrender').valid && onSubmitClicked">
          Please check yes or no.
          </p>

          <!-- Message/Question Box -->
          <div class="field" style="margin-top: 30px">
            <label class="label">Message</label>
            <div class="control">
              <textarea
                class="textarea"
                placeholder="I am interested in adopting..."
                formControlName="message"
              ></textarea>
            </div>
          </div>

          <!-- Terms Checkboxes -->
          <div class="field" style="margin-top: 30px">
            <div class="control">
              <label class="checkbox">
                <input type="checkbox" formControlName="ageCheck" />
                I am 18 years old or older.
              </label>
            </div>
          </div>

          <p
          class="help is-danger" *ngIf="!adoptionRequestForm.get('ageCheck').valid && onSubmitClicked">
          Please confirm your age.
          </p>

          <div class="field">
            <div class="control">
              <label class="checkbox">
                <input type="checkbox" formControlName="termsConditions" />
                I agree to the <a>Pet Pursuit Terms and Conditions.</a>
              </label>
            </div>
          </div>

          <p
          class="help is-danger" *ngIf="!adoptionRequestForm.get('termsConditions').valid && onSubmitClicked">
          Please agree to the terms and conditions.
          </p>

        </form>
        <!-- Form end -->
      </section>
      <footer class="modal-card-foot has-background-info">
        <div class="field is-grouped">
          <div class="control field is-grouped">
            <p class="is-size-4 has-text-weight-semibold formWarning"
              *ngIf="!adoptionRequestForm.valid && onSubmitClicked"
            >Please fill in all required sections.
          </p>
            <button
              type="submit"
              class="button is-success"
              (click)="onSubmit()"
            >
              Submit
            </button>

          </div>
          <div class="control">
            <button class="button is-danger" (click)="onCancel()">
              Cancel
            </button>
          </div>
        </div>
      </footer>
    </div>
    <!-- Modal End for Adoption Request Form -->
  </div>

  <!-- petClicked Modal -->

  <div class="modal" [ngClass]="openModal ? 'is-active' : ''">
    <div class="modal-background">
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title">{{ selectedPet?.petName }}</p>
          <button
            class="delete"
            aria-label="close"
            (click)="openModal = false"
          ></button>
        </header>
        <section class="modal-card-body">
          <div class="modal-content content">
            <figure class="media-left">
              <p class="image">
                <img
                  src="{{ selectedPet?.imagePath }}"
                  class="clickedPetImage"
                />
              </p>
            </figure>
            <h1>
              <strong>A little bit about {{ selectedPet?.petName }}</strong>
            </h1>
            <h3><strong>Cattle Dog Mix</strong></h3>
            <div>
              {{ selectedPet?.message }}
            </div>
          </div>
          <div class="column">
            <div class="block">
              Age

              <span class="tag is-pulled-right is-info has-text-weight-bold">{{
                selectedPet?.petAge
              }}</span>
            </div>
            <hr />
            <div class="block">
              Sex
              <span class="tag is-pulled-right is-info is-info has-text-weight-bold">{{
                selectedPet?.petGender
              }}</span>
            </div>
            <hr />
            <div class="block">
              Spayed/neutered?
              <span class="tag is-pulled-right is-info is-info has-text-weight-bold">{{
                selectedPet?.spayedNeutered
              }}</span>
            </div>
            <hr />
            <div class="block">
              Good with children?
              <span class="tag is-pulled-right is-info is-info has-text-weight-bold">{{ selectedPet?.goodWithChildren ? "Yes" : "No" }}</span>
            </div>
            <hr />
            <div class="block">
              Housetrained?
              <span class="tag is-pulled-right is-info is-info has-text-weight-bold">{{ selectedPet?.housetrained ? "Yes" : "No" }}</span>
            </div>
            <hr />
            <div class="block">
              Good with other dogs?
              <span class="tag is-pulled-right is-info is-info has-text-weight-bold">{{ selectedPet?.goodWithDogs ? "Yes" : "No" }}</span>
            </div>
            <hr />
            <div class="block">
              Good with cats?
              <span class="tag is-pulled-right is-info is-info has-text-weight-bold">{{ selectedPet?.goodWithCats ? "Yes" : "No" }}</span>
            </div>
          </div>
        </section>
        <footer class="modal-card-foot">
          <button class="button is-success" (click)="applyButtonClicked()">
            Apply to Adopt
          </button>
          <button (click)="addFav()" (click)="openModal = false"  class="button is-info">Add to Favorites ⭐</button>
          <button class="button is-danger" (click)="openModal = false">
            Close
          </button>
        </footer>
      </div>
    </div>
  </div>
</div>
